{"version":3,"file":"app.c52cf8013690b8edd150.hot-update.js","sources":["/Users/xavier/Programming/React/percentag/src/recommend.js"],"sourcesContent":["/*global chrome*/\nimport React, { Component } from 'react';\nimport RecomPaper from './recomPaper';\n\nexport default class Recommend extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            recommended:\n                [\n                    // {title: \"\"},\n                    {\n                        title: \"Former BoE governor Mark Carney joins board of digital payments firm Stripe\",\n                        img: \"https://cdn.dealstreetasia.com/uploads/2018/09/Stripe-e1613972852450.png?fit=1024,512?resize=940,528\",\n                        date: Date().toLocaleString(),\n                        match: 93,\n                        url: \"https://www.dealstreetasia.com/stories/boe-mark-carney-stripe-228604/\"\n                    },\n                    {\n                        title: \"Asia Digest: Mars Growth invests $4m in Hiver; Stripe backs Safepay\",\n                        img: \"https://cdn.dealstreetasia.com/uploads/2015/12/money-currency-investment-dollars.jpg?fit=980,544?resize=940,528\",\n                        date: Date().toLocaleString(),\n                        match: 77,\n                        url: \"https://www.dealstreetasia.com/stories/mars-growth-hiver-strip-safepay-227585/\"\n                    },\n                    {\n                        title: \"BEENEXT, Qualgro invest in Vietnamese edtech startup Edmicro’s pre-Series A+ round\",\n                        img: \"https://cdn.dealstreetasia.com/uploads/2020/08/online-education-e1609923082605.png?fit=950,477?resize=940,528\",\n                        date: Date().toLocaleString(),\n                        match: 65,\n                        url: \"https://www.dealstreetasia.com/stories/vietnam-edtech-edmicro-2m-232597/\"\n                    }\n                ],\n            savedTags: [],\n        };\n        this.getRecommendation = this.getRecommendation.bind(this);\n        // this.getTag = this.getTag(this);\n    }\n    componentDidMount() {\n        \n        let newThis = this;\n        chrome.storage.local.get(['tags'], function (result) {\n            newThis.setState({\n                savedTags: result.tags\n            })\n            newThis.getRecommendation();\n        });\n        console.log(Array.isArray(this.state.savedTags))\n        if (Array.isArray(this.state.savedTags) && this.state.savedTags.length) {\n            return this.setState({\n                recommended: [{ title: \"\" }],\n                savedTags: [],\n            })\n        }\n        else {\n            return this.setState({\n                recommended:\n                    [\n                        {\n                            title: \"Former BoE governor Mark Carney joins board of digital payments firm Stripe\",\n                            img: \"https://cdn.dealstreetasia.com/uploads/2018/09/Stripe-e1613972852450.png?fit=1024,512?resize=940,528\",\n                            date: Date().toLocaleString(),\n                            match: 93,\n                            url: \"https://www.dealstreetasia.com/stories/boe-mark-carney-stripe-228604/\"\n                        },\n                        {\n                            title: \"Asia Digest: Mars Growth invests $4m in Hiver; Stripe backs Safepay\",\n                            img: \"https://cdn.dealstreetasia.com/uploads/2015/12/money-currency-investment-dollars.jpg?fit=980,544?resize=940,528\",\n                            date: Date().toLocaleString(),\n                            match: 77,\n                            url: \"https://www.dealstreetasia.com/stories/mars-growth-hiver-strip-safepay-227585/\"\n                        },\n                        {\n                            title: \"BEENEXT, Qualgro invest in Vietnamese edtech startup Edmicro’s pre-Series A+ round\",\n                            img: \"https://cdn.dealstreetasia.com/uploads/2020/08/online-education-e1609923082605.png?fit=950,477?resize=940,528\",\n                            date: Date().toLocaleString(),\n                            match: 65,\n                            url: \"https://www.dealstreetasia.com/stories/vietnam-edtech-edmicro-2m-232597/\"\n                        }\n                    ],\n            })\n        }\n    }\n\n    getRecommendation = async () => {\n        console.log(\"savedTages in recommend to be send:\" + this.state.savedTags);\n        const response = await fetch('http://localhost:5000/api/getReco', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                tags: this.state.savedTags,\n            }),\n        });\n        const body = await response.json();\n        if (response.status !== 200) throw Error(body.message);\n        return body;\n    };\n\n    // getTagApi() {\n    //     this.callApiGetTag()\n    //         .then(res => { \n    //             this.setState({ savedTags: res.express }) \n    //         })\n    //         .catch(err => console.log(err));\n    // }\n    // callApiGetTag = async () => {\n    //     const response = await fetch('http://localhost:5000/api/getTags');\n    //     const body = await response.json();\n    //     if (response.status !== 200) throw Error(body.message);\n\n    //     return body;\n    //   };\n\n\n    render() {\n        return (\n            <div>\n                <p>Follow more tags to receive recommendations specific to your interest </p>\n                <b>\n                    Recommended For You\n                </b>\n                <RecomPaper recommendation={this.state.recommended} />\n\n            </div>\n\n        )\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAFA;AAgFA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AADA;AALA;AASA;AACA;AACA;AACA;AACA;AA5FA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AAQA;AA1BA;AA4BA;AAEA;AACA;AAAA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAFA;AAIA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AALA;AAjBA;AA0BA;AACA;AACA;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AA7HA;;;;A","sourceRoot":""}