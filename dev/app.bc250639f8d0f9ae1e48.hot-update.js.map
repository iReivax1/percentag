{"version":3,"file":"app.bc250639f8d0f9ae1e48.hot-update.js","sources":["/Users/xavier/Programming/React/watchr2/src/tags.js"],"sourcesContent":["/*global chrome*/\nimport React, { Component } from 'react'\nimport TagsPaper from './tagsPaper'\nimport CurrentTagPaper from './currentTagPaper'\nimport ApiCall from './Backend/apiCall';\n\nexport default class Tags extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            tags: [\"\"],\n            savedTags: [\"\"]\n        };\n        this.getTags = this.getTags.bind(this);\n        this.getChromeStoragefunction = this.getChromeStoragefunction.bind(this);\n        this.saveArrayToState = this.saveArrayToState.bind(this);\n    }\n\n    componentDidMount() {\n        let newThis = this;\n        chrome.storage.local.get(['tags'], function (result) {\n            // console.log(\"retrieved tags is\" + result.tags);\n            newThis.saveArrayToState(result.tags);\n        });\n        this.getChromeStoragefunction();\n    }\n\n    componentWillUnmount() {\n        let newThis = this;\n        chrome.storage.local.set({ tags: newThis.state.savedTags }, function () {\n            console.log(\"saved: \" + newThis.state.savedTags);\n        })\n    }\n\n    getChromeStoragefunction() {\n        let newThis = this;\n        chrome.storage.onChanged.addListener(function (changes, namespace) {\n            let tempArray = [...newThis.state.savedTags];\n            for (var key in changes) {\n                var storageChange = changes[key];\n                storageChange.newValue.map(e => { \n                    if (!tempArray.includes(e)){\n                        tempArray.push(e)\n                    } \n                })\n                newThis.saveArrayToState(tempArray);\n            }\n        });\n    }\n\n    saveArrayToState = (array) => {\n        this.setState({\n            savedTags: array\n        })\n    }\n    getTags(e) {\n        this.setState({\n            tags: e\n        })\n        console.log(e)\n    }\n\n    render() {\n\n        return (\n            <div >\n                <p>\n                    Get recommendations for articles that matches your\n                    interests when you follow more tags:\n                </p>\n                <b>\n                    You are following\n                </b>\n                <div style={{paddingLeft: 50}}>\n                <TagsPaper savedTagArray={this.state.savedTags} />\n                </div>\n                <b>\n                    From this article\n                </b>\n\n                <CurrentTagPaper tagArray={this.state.tags} />\n                <ApiCall getTags={this.getTags} tags={this.state.tags} />\n            </div>\n        )\n    }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAFA;AA4CA;AACA;AADA;AAGA;AACA;AA9CA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAhBA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AA/EA;;;;A","sourceRoot":""}